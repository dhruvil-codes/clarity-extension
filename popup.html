<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Clarity – Smart Summarizer</title>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Mono:wght@400;500&family=Geist:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --ink: #0e0e0e;
      --paper: #faf9f6;
      --cream: #f2efe8;
      --accent: #c8f04a;
      --accent-dark: #9dbe2e;
      --muted: #8a8680;
      --border: #e0ddd6;
      --tag-bg: #eeeae0;
      --shadow: 0 2px 12px rgba(14,14,14,0.08);
      --radius: 10px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      width: 400px;
      min-height: 200px;
      background: var(--paper);
      font-family: 'Geist', sans-serif;
      color: var(--ink);
      overflow-x: hidden;
    }

    /* ── TOP BAR ── */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px 12px;
      border-bottom: 1px solid var(--border);
      background: var(--paper);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .logo { display: flex; align-items: center; gap: 8px; }

    .logo-mark {
      width: 28px; height: 28px;
      background: #1a4a1a;
      border-radius: 7px;
      display: flex; align-items: center; justify-content: center;
    }
    .logo-mark svg { display: block; }

    .logo-name {
      font-family: 'Instrument Serif', serif;
      font-size: 18px;
      letter-spacing: -0.3px;
      color: var(--ink);
    }

    .logo-tag {
      font-size: 10px;
      font-family: 'DM Mono', monospace;
      color: var(--muted);
      background: var(--cream);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 1px 6px;
      margin-top: 1px;
    }

    .topbar-right { display: flex; align-items: center; gap: 6px; }

    .icon-btn {
      width: 30px; height: 30px;
      background: none;
      border: 1px solid var(--border);
      border-radius: 8px;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      color: var(--muted);
      transition: all 0.15s;
    }
    .icon-btn:hover { background: var(--cream); color: var(--ink); }

    /* ── MAIN CONTENT ── */
    .content { padding: 16px 18px; }

    /* ── IDLE STATE ── */
    #idle-state { text-align: center; padding: 24px 16px; }

    .idle-art {
      width: 72px; height: 72px;
      background: var(--cream);
      border: 1px solid var(--border);
      border-radius: 20px;
      display: flex; align-items: center; justify-content: center;
      margin: 0 auto 16px;
    }

    .idle-title {
      font-family: 'Instrument Serif', serif;
      font-size: 20px;
      color: var(--ink);
      margin-bottom: 6px;
    }

    .idle-sub {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.6;
      max-width: 240px;
      margin: 0 auto 20px;
    }

    .summarize-btn {
      width: 100%;
      padding: 11px 20px;
      background: var(--ink);
      color: var(--paper);
      border: none;
      border-radius: var(--radius);
      font-family: 'Geist', sans-serif;
      font-size: 13.5px;
      font-weight: 500;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      gap: 8px;
      transition: all 0.2s;
      letter-spacing: -0.1px;
    }
    .summarize-btn:hover { background: #1f1f1f; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(14,14,14,0.18); }
    .summarize-btn:active { transform: translateY(0); }

    .btn-icon {
      width: 18px; height: 18px;
      background: var(--accent);
      border-radius: 4px;
      display: flex; align-items: center; justify-content: center;
      flex-shrink: 0;
    }

    /* ── LOADING ── */
    #loading-state { display: none; padding: 32px 16px; text-align: center; }

    .loader-ring {
      width: 44px; height: 44px;
      border: 2.5px solid var(--border);
      border-top-color: var(--ink);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 16px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .loading-steps { display: flex; flex-direction: column; gap: 6px; margin-top: 4px; }

    .loading-step {
      font-size: 11.5px;
      font-family: 'DM Mono', monospace;
      color: var(--muted);
      opacity: 0;
      animation: fadeStep 0.4s ease forwards;
    }
    .loading-step.active { color: var(--ink); }
    .loading-step:nth-child(1) { animation-delay: 0.1s; }
    .loading-step:nth-child(2) { animation-delay: 0.9s; }
    .loading-step:nth-child(3) { animation-delay: 1.8s; }
    @keyframes fadeStep { to { opacity: 1; } }

    /* ── RESULT STATE ── */
    #result-state { display: none; }

    /* TLDR block */
    .tldr-block {
      background: var(--ink);
      color: var(--paper);
      border-radius: var(--radius);
      padding: 12px 14px;
      margin-bottom: 12px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    .tldr-block::before {
      content: '';
      position: absolute;
      top: -20px; right: -20px;
      width: 80px; height: 80px;
      background: var(--accent);
      border-radius: 50%;
      opacity: 0.12;
    }
    .tldr-eyebrow {
      font-family: 'DM Mono', monospace;
      font-size: 9.5px;
      color: var(--accent);
      letter-spacing: 1.2px;
      text-transform: uppercase;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .tldr-share-hint {
      font-size: 9px;
      color: rgba(200,240,74,0.6);
      letter-spacing: 0;
      text-transform: none;
    }
    .tldr-text {
      font-family: 'Instrument Serif', serif;
      font-size: 15px;
      line-height: 1.55;
      color: #f5f5f0;
    }

    /* Share action row — sits below TLDR block */
    .share-row {
      display: flex;
      gap: 6px;
      margin-bottom: 12px;
    }

    .share-btn {
      flex: 1;
      padding: 8px 10px;
      border-radius: 8px;
      font-family: 'Geist', sans-serif;
      font-size: 11.5px;
      font-weight: 500;
      cursor: pointer;
      border: 1px solid var(--border);
      display: flex; align-items: center; justify-content: center;
      gap: 5px;
      transition: all 0.15s;
      background: var(--cream);
      color: var(--ink);
    }
    .share-btn:hover { background: var(--border); }
    .share-btn-x { background: var(--ink); color: var(--paper); border-color: var(--ink); }
    .share-btn-x:hover { background: #222; }

    /* Tags row */
    .tags-row {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-bottom: 12px;
    }

    .tag-chip {
      font-family: 'DM Mono', monospace;
      font-size: 10.5px;
      color: var(--muted);
      background: var(--cream);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 3px 9px;
      cursor: pointer;
      transition: all 0.15s;
    }
    .tag-chip:hover { background: var(--ink); color: var(--paper); border-color: var(--ink); }

    /* Meta badges */
    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 14px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 4px 9px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 500;
      border: 1px solid transparent;
    }
    .badge-type { background: var(--tag-bg); color: var(--ink); border-color: var(--border); }
    .badge-tone { background: #fef3cd; color: #7a5c00; border-color: #f0d97a; }
    .badge-entity { background: #e8f4fd; color: #1a5f8a; border-color: #b3d9f5; cursor: pointer; transition: all 0.15s; }
    .badge-entity:hover { background: #d0eaf9; }
    .badge-company { background: #f0ebff; color: #5b21b6; border-color: #d8b4fe; }
    .badge-company:hover { background: #e9d5ff; }
    .badge-product { background: #ecfdf5; color: #065f46; border-color: #6ee7b7; }
    .badge-product:hover { background: #d1fae5; }

    /* Section label */
    .section-label {
      font-family: 'DM Mono', monospace;
      font-size: 9.5px;
      color: var(--muted);
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    /* Points list */
    .points-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 1px;
      margin-bottom: 14px;
    }

    .point-item {
      display: flex;
      gap: 10px;
      padding: 9px 11px;
      border-radius: 8px;
      background: var(--cream);
      border: 1px solid var(--border);
      font-size: 12.5px;
      line-height: 1.55;
      color: var(--ink);
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    .point-item.visible { opacity: 1; transform: translateY(0); }

    .point-num {
      font-family: 'DM Mono', monospace;
      font-size: 10px;
      color: var(--muted);
      min-width: 14px;
      padding-top: 2px;
    }

    .divider { height: 1px; background: var(--border); margin: 14px 0; }

    /* Ask section */
    .ask-input-wrap { display: flex; gap: 6px; align-items: center; }

    .ask-input {
      flex: 1;
      padding: 9px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-family: 'Geist', sans-serif;
      font-size: 12px;
      color: var(--ink);
      background: var(--cream);
      outline: none;
      transition: border-color 0.15s;
    }
    .ask-input:focus { border-color: var(--ink); background: #fff; }
    .ask-input::placeholder { color: var(--muted); }

    .ask-btn {
      padding: 9px 13px;
      background: var(--ink);
      color: var(--paper);
      border: none;
      border-radius: 8px;
      font-size: 12px;
      font-family: 'Geist', sans-serif;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.15s;
      display: flex; align-items: center; gap: 5px;
    }
    .ask-btn:hover { background: #222; }
    .ask-btn:disabled { opacity: 0.5; cursor: not-allowed; }

    .ask-response {
      margin-top: 10px;
      padding: 10px 12px;
      background: #fff;
      border: 1px solid var(--border);
      border-left: 3px solid var(--accent-dark);
      border-radius: 0 8px 8px 0;
      font-size: 12px;
      line-height: 1.6;
      color: var(--ink);
      display: none;
    }

    /* Footer */
    .footer-actions {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 14px;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .footer-link {
      font-size: 11px;
      color: var(--muted);
      cursor: pointer;
      text-decoration: none;
      display: flex; align-items: center; gap: 4px;
      transition: color 0.15s;
      background: none;
      border: none;
      font-family: 'Geist', sans-serif;
    }
    .footer-link:hover { color: var(--ink); }

    .reading-time {
      font-family: 'DM Mono', monospace;
      font-size: 10px;
      color: var(--muted);
    }

    /* ── HISTORY PANEL ── */
    #history-panel {
      display: none;
      padding: 16px 18px;
      border-top: 1px solid var(--border);
      animation: slideDown 0.2s ease;
    }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }

    .history-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .history-title {
      font-family: 'DM Mono', monospace;
      font-size: 9.5px;
      color: var(--muted);
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .history-clear {
      font-size: 10px;
      color: var(--muted);
      cursor: pointer;
      background: none;
      border: none;
      font-family: 'Geist', sans-serif;
      transition: color 0.15s;
    }
    .history-clear:hover { color: #c0392b; }

    .history-empty {
      text-align: center;
      padding: 20px 0;
      font-size: 12px;
      color: var(--muted);
    }

    .history-item {
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--cream);
      margin-bottom: 6px;
      cursor: pointer;
      transition: all 0.15s;
    }
    .history-item:hover { border-color: var(--ink); background: #fff; }

    .history-item-title {
      font-size: 12px;
      font-weight: 500;
      color: var(--ink);
      margin-bottom: 3px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .history-item-tldr {
      font-size: 11px;
      color: var(--muted);
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .history-item-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 5px;
    }

    .history-item-date {
      font-family: 'DM Mono', monospace;
      font-size: 9.5px;
      color: var(--muted);
    }

    /* ── SETTINGS PANEL ── */
    #settings-panel {
      display: none;
      padding: 16px 18px;
      border-top: 1px solid var(--border);
      background: var(--cream);
      animation: slideDown 0.2s ease;
    }

    .settings-title {
      font-family: 'DM Mono', monospace;
      font-size: 9.5px;
      color: var(--muted);
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 12px;
    }

    .setting-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .setting-label { font-size: 12.5px; color: var(--ink); }
    .setting-sub { font-size: 11px; color: var(--muted); }

    .api-input {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      color: var(--ink);
      background: var(--paper);
      margin-top: 6px;
    }
    .api-input:focus { outline: none; border-color: var(--ink); }

    .save-btn {
      width: 100%;
      margin-top: 12px;
      padding: 9px;
      background: var(--ink);
      color: var(--paper);
      border: none;
      border-radius: 8px;
      font-family: 'Geist', sans-serif;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
    }
    .save-btn:hover { background: #222; }

    .toggle { position: relative; width: 36px; height: 20px; }
    .toggle input { opacity: 0; width: 0; height: 0; }
    .toggle-slider {
      position: absolute; inset: 0;
      background: var(--border); border-radius: 20px;
      cursor: pointer; transition: 0.2s;
    }
    .toggle-slider::before {
      content: '';
      position: absolute;
      width: 14px; height: 14px;
      left: 3px; bottom: 3px;
      background: white;
      border-radius: 50%;
      transition: 0.2s;
    }
    .toggle input:checked + .toggle-slider { background: var(--ink); }
    .toggle input:checked + .toggle-slider::before { transform: translateX(16px); }

    /* Error toast */
    .error-toast {
      margin: 0 18px 14px;
      padding: 10px 12px;
      background: #fff2f2;
      border: 1px solid #ffc5c5;
      border-radius: 8px;
      font-size: 12px;
      color: #c0392b;
      display: none;
      gap: 8px;
      align-items: flex-start;
    }

    /* Success toast */
    .success-toast {
      position: fixed;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--ink);
      color: var(--paper);
      font-size: 11.5px;
      font-family: 'Geist', sans-serif;
      padding: 8px 16px;
      border-radius: 20px;
      white-space: nowrap;
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 999;
      pointer-events: none;
    }
    .success-toast.show { opacity: 1; }

    /* Hidden canvas for card generation */
    #share-canvas { display: none; }
  </style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="logo">
    <div class="logo-mark" style="background:#1a4a1a;">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <text x="8" y="8" text-anchor="middle" dominant-baseline="central" font-family="Instrument Serif, serif" font-size="16" fill="#d4e8a0">C</text>
      </svg>
    </div>
    <span class="logo-name">Clarity</span>
    <span class="logo-tag">AI</span>
  </div>
  <div class="topbar-right">
    <!-- History button -->
    <button class="icon-btn" id="history-toggle" title="History">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
      </svg>
    </button>
    <!-- Settings button -->
    <button class="icon-btn" id="settings-toggle" title="Settings">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
      </svg>
    </button>
  </div>
</div>

<!-- HISTORY PANEL -->
<div id="history-panel">
  <div class="history-header">
    <div class="history-title">Recent Summaries</div>
    <button class="history-clear" id="history-clear">Clear all</button>
  </div>
  <div id="history-list"></div>
</div>

<!-- SETTINGS PANEL -->
<div id="settings-panel">
  <div class="settings-title">Configuration</div>
  <div style="margin-bottom:12px;">
    <div class="setting-label">OpenAI API Key</div>
    <div class="setting-sub">Stored locally, never sent elsewhere.</div>
    <input class="api-input" id="api-key-input" type="password" placeholder="sk-proj-..."/>
  </div>
  <div class="setting-row">
    <div>
      <div class="setting-label">Show Tone Analysis</div>
      <div class="setting-sub">Detect article sentiment</div>
    </div>
    <label class="toggle"><input type="checkbox" id="toggle-tone" checked/><span class="toggle-slider"></span></label>
  </div>
  <div class="setting-row">
    <div>
      <div class="setting-label">Show Key Entities</div>
      <div class="setting-sub">People, companies, products</div>
    </div>
    <label class="toggle"><input type="checkbox" id="toggle-entities" checked/><span class="toggle-slider"></span></label>
  </div>
  <div class="setting-row">
    <div>
      <div class="setting-label">Reading Time Estimate</div>
    </div>
    <label class="toggle"><input type="checkbox" id="toggle-readtime" checked/><span class="toggle-slider"></span></label>
  </div>
  <button class="save-btn" id="save-settings">Save Settings</button>
</div>

<!-- ERROR TOAST -->
<div class="error-toast" id="error-toast">
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#c0392b" stroke-width="2" style="flex-shrink:0;margin-top:1px"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
  <span id="error-msg">Something went wrong. Check your API key in settings.</span>
</div>

<!-- MAIN CONTENT -->
<div class="content">

  <!-- IDLE STATE -->
  <div id="idle-state">
    <div class="idle-art">
      <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
        <rect x="4" y="6" width="24" height="3" rx="1.5" fill="#d0ccc0"/>
        <rect x="4" y="12" width="18" height="3" rx="1.5" fill="#d0ccc0"/>
        <rect x="4" y="18" width="21" height="3" rx="1.5" fill="#d0ccc0"/>
        <rect x="4" y="24" width="12" height="3" rx="1.5" fill="#d0ccc0"/>
        <rect x="20" y="20" width="8" height="8" rx="2" fill="#c8f04a"/>
        <path d="M22.5 24.5L23.5 25.5L25.5 23" stroke="#0e0e0e" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
    </div>
    <h2 class="idle-title">Summarize this page</h2>
    <p class="idle-sub">Get a sharp 5-point breakdown with tone analysis, key entities, and a TLDR — in seconds.</p>
    <button class="summarize-btn" id="summarize-btn">
      <span class="btn-icon" style="font-size:12px;color:#0e0e0e;line-height:1;">✦</span>
      Summarize this article
    </button>
  </div>

  <!-- LOADING STATE -->
  <div id="loading-state">
    <div class="loader-ring"></div>
    <div class="loading-steps">
      <div class="loading-step active">→ Extracting article content...</div>
      <div class="loading-step">→ Analyzing with OpenAI...</div>
      <div class="loading-step">→ Structuring your summary...</div>
    </div>
  </div>

  <!-- RESULT STATE -->
  <div id="result-state">

    <!-- TLDR card -->
    <div class="tldr-block" id="tldr-block">
      <div class="tldr-eyebrow">
        <span>TL;DR</span>
        <span class="tldr-share-hint">click to share ↗</span>
      </div>
      <div class="tldr-text" id="tldr-text">Loading...</div>
    </div>

    <!-- Share row -->
    <div class="share-row">
      <button class="share-btn" id="download-btn">
        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        Download card
      </button>
      <button class="share-btn share-btn-x" id="share-x-btn">
        <svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.742l7.73-8.835L1.254 2.25H8.08l4.26 5.632zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </svg>
        Share on X
      </button>
    </div>

    <!-- Tags row -->
    <div class="tags-row" id="tags-row"></div>

    <!-- Meta badges -->
    <div class="meta-row" id="meta-row"></div>

    <!-- Points -->
    <div class="section-label">Key Points</div>
    <ul class="points-list" id="points-list"></ul>

    <div class="divider"></div>

    <!-- Ask section -->
    <div class="ask-section">
      <div class="section-label" style="margin-bottom:8px;">Ask about this article</div>
      <div class="ask-input-wrap">
        <input class="ask-input" id="ask-input" placeholder="e.g. What's the main argument?" />
        <button class="ask-btn" id="ask-btn">
          <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>
          </svg>
          Ask
        </button>
      </div>
      <div class="ask-response" id="ask-response"></div>
    </div>

    <!-- Footer -->
    <div class="footer-actions">
      <button class="footer-link" id="redo-btn">
        <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
        </svg>
        Re-summarize
      </button>
      <span class="reading-time" id="reading-time-label"></span>
    </div>
  </div>

</div>

<!-- Hidden canvas for card generation -->
<canvas id="share-canvas"></canvas>

<!-- Success toast -->
<div class="success-toast" id="success-toast"></div>

<script src="popup.js"></script>
</body>
</html>
